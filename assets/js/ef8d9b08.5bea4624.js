"use strict";(self.webpackChunklittle_sandman=self.webpackChunklittle_sandman||[]).push([[495],{1062:e=>{e.exports=JSON.parse('{"permalink":"/dreamland-ZiaLai/blog/music","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025-05-27-multitrack-music.md","source":"@site/blog/2025-05-27-multitrack-music.md","title":"\ud83c\udfbb Musique multipiste","description":"Bonjour \xe0 tous !","date":"2025-05-27T00:00:00.000Z","tags":[{"inline":true,"label":"musique","permalink":"/dreamland-ZiaLai/blog/tags/musique"}],"readingTime":2.64,"hasTruncateMarker":false,"authors":[{"name":"Bj\xf6rn LAI","socials":{},"key":null,"page":null}],"frontMatter":{"slug":"music","title":"\ud83c\udfbb Musique multipiste","authors":[{"name":"Bj\xf6rn LAI"}],"tags":["musique"]},"unlisted":false}')},6070:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>l});var t=s(1062),r=s(4848),i=s(8453);const a={slug:"music",title:"\ud83c\udfbb Musique multipiste",authors:[{name:"Bj\xf6rn LAI"}],tags:["musique"]},o=void 0,u={authorsImageUrls:[void 0]},l=[{value:"\ud83c\udfb6 Composition avec MuseScore",id:"-composition-avec-musescore",level:2},{value:"\u267e\ufe0f Probl\xe8me de loop",id:"\ufe0f-probl\xe8me-de-loop",level:2},{value:"\ud83d\udcbf Raccourcissement avec un script python",id:"-raccourcissement-avec-un-script-python",level:2},{value:"\ud83d\udd0a Chargement des sons dans Babylon.js",id:"-chargement-des-sons-dans-babylonjs",level:2}];function c(e){const n={a:"a",em:"em",h2:"h2",img:"img",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Bonjour \xe0 tous !"}),"\n",(0,r.jsx)(n.p,{children:"Dans cet article, nous expliquerons comment nous avons r\xe9alis\xe9 la musique du premier niveau du jeu,\r\nainsi que les probl\xe8mes rencontr\xe9s au cours de cette \xe9tape."}),"\n",(0,r.jsx)(n.p,{children:"La particularit\xe9 de cette musique est qu'elle commence avec peu d'instruments (le piano et le clavecin),\r\net d'autres s'ajoutent au fur et \xe0 mesure qu'on progresse afin de cr\xe9er un effet de tension."}),"\n",(0,r.jsx)(n.h2,{id:"-composition-avec-musescore",children:"\ud83c\udfb6 Composition avec MuseScore"}),"\n",(0,r.jsx)(n.p,{children:"La musique a \xe9t\xe9 r\xe9alis\xe9e \xe0 l'aide de MuseScore, un logiciel gratuit permettant de composer des morceaux en utilisant la\r\nnotation musicale standard, sur une partition."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"musescore image",src:s(6819).A+"",width:"1919",height:"1018"})}),"\n",(0,r.jsx)(n.p,{children:"L'utilisation de ce logiciel est tr\xe8s pratique, car elle offre de nombreuses options d'exports,\r\net notamment celle qui nous int\xe9resse : exporter les pistes s\xe9par\xe9ment."}),"\n",(0,r.jsx)(n.p,{children:"Cependant, un autre probl\xe8me nous attend..."}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-probl\xe8me-de-loop",children:"\u267e\ufe0f Probl\xe8me de loop"}),"\n",(0,r.jsx)(n.p,{children:"En g\xe9n\xe9ral, dans les jeux-vid\xe9os, la musique doit pouvoir tourner en boucle sans transition brusque,\r\net sans blanc \xe0 la fin. Et c'est ce qu'on souhaite pour notre musique."}),"\n",(0,r.jsx)(n.p,{children:"Cependant, une particularit\xe9 de MuseScore est que lorsqu'on exporte une musique, un blanc est rajout\xe9 \xe0 la fin pour permettre\r\naux derni\xe8res notes de r\xe9sonner jusqu'\xe0 leur \xe9vanouissement complet, et il n'existe aucune option pour emp\xeacher cela."}),"\n",(0,r.jsx)(n.p,{children:"Apr\xe8s l'export, on obtient sept fichiers audio au format ogg, un pour chaque instrument, mais comme ils ont chacun\r\nun blanc \xe0 la fin, la boucle musicale ne peut malheureusement pas poursuivre de fa\xe7on fluide."}),"\n",(0,r.jsx)(n.p,{children:"Il faut trouver un moyen de garantir une boucle parfaite !"}),"\n",(0,r.jsx)(n.h2,{id:"-raccourcissement-avec-un-script-python",children:"\ud83d\udcbf Raccourcissement avec un script python"}),"\n",(0,r.jsx)(n.p,{children:"Notre objectif est de couper la fin de chaque piste, en supprimant tout le temps \xe9coul\xe9 apr\xe8s la mesure finale."}),"\n",(0,r.jsx)(n.p,{children:"On peut faire cela en utilisant n'importe quel \xe9diteur audio, comme Audacity."}),"\n",(0,r.jsx)(n.p,{children:"Toutefois, le nombre de pistes \xe9tant relativement\r\n\xe9lev\xe9, cela peut s'av\xe9rer fastidieux. Et de plus, un d\xe9coupage manuel peut entrainer des impr\xe9cisions, ce qui entrainerait\r\nune terrible d\xe9synchronisation des pistes apr\xe8s quelques tours de boucle."}),"\n",(0,r.jsx)(n.p,{children:"Il devient donc particuli\xe8rement int\xe9ressant d'automatiser ce processus."}),"\n",(0,r.jsxs)(n.p,{children:["Pour ce faire, nous avons utilis\xe9 un script python utilisant le module de traitement audio ",(0,r.jsx)(n.em,{children:"pydub"}),".\r\nCela a permis d'automatiser efficacement le d\xe9coupage des pistes, en garantissant une pr\xe9cision \xe0 la milliseconde pr\xe8s !"]}),"\n",(0,r.jsx)(n.h2,{id:"-chargement-des-sons-dans-babylonjs",children:"\ud83d\udd0a Chargement des sons dans Babylon.js"}),"\n",(0,r.jsx)(n.p,{children:"Il ne reste plus qu'\xe0 importer les sons dans Babylon. Mais prudence, il reste un dernier pi\xe8ge \xe0 \xe9viter."}),"\n",(0,r.jsx)(n.p,{children:"Si on charge successivement toutes les pistes, puis, qu'on essaie imm\xe9diatement de les jouer, on peut obtenir le probl\xe8me suivant :\r\naucun son ne joue, car le chargement des sons n'est pas encore termin\xe9 et est toujours en train de continuer de mani\xe8re asynchrone."}),"\n",(0,r.jsxs)(n.p,{children:["Pour \xe9viter cela, on utilise le param\xe8tre optionnel ",(0,r.jsx)(n.em,{children:"readyToPlayCallback"})," qui appellera une fonction \xe0 chaque fois qu'un son finit de charger.\r\nCette derni\xe8re fonction a simplement pour effet d'incr\xe9menter un compteur et de d\xe9marrer simultan\xe9ment tous les sons, si le quota de sons \xe0 charger est atteint."]}),"\n",(0,r.jsxs)(n.p,{children:["Ce proc\xe9d\xe9 est d\xe9montr\xe9 dans ce ",(0,r.jsx)(n.a,{href:"https://playground.babylonjs.com/#PCY1J#6",children:"playground"})," de la doc de Babylon.js."]}),"\n",(0,r.jsx)(n.p,{children:"Et voil\xe0 ! Une fois que tous les sons sont d\xe9marr\xe9s en m\xeame temps, on n'a plus qu'\xe0 couper le son des pistes qui ne doivent pas encore jouer,\r\net \xe0 les r\xe9activer petit \xe0 petit d\xe8s que le joueur atteint un objectif dans le niveau."})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},6819:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/musescore-cbead2cedf7cd4cb938be4414342a2b7.png"},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var t=s(6540);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);